addons:
  apt:
    packages:
      - python-pygments

install:
  - wget -qO- https://api.github.com/repos/gohugoio/hugo/releases/latest | sed -r -n '/browser_download_url/{/hugo_extended_.*?_Linux-64bit.tar.gz/{s@[^:]*:[[:space:]]*"([^"]*)".*@\1@g;p}}' | xargs wget
  - tar -xvzf *.tar.gz
  - rm -rf public || exit 0

script:
  - hugo

# https://docs.travis-ci.com/user/deployment/pages/
deploy:
  provider: pages
  project-name: mysupertest
  skip-cleanup: true
  #committer-from-gh: false
  name: $GITHUB_USERNAME
  email: $GITHUB_EMAIL
  github-token: $GITHUB_TOKEN  # Set in travis-ci.org dashboard, marked secure
  verbose: true
  keep-history: true
  local-dir: public
  fqdn: example.com
  target-branch: gh-pages
  on:
    branch: master
